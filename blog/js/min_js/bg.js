function bg(){THREE.ImageUtils.crossOrigin="*";var e;!function(e){var t=function(){function e(){var e=this;this.containerElement=document.createElement("div"),document.body.appendChild(this.containerElement),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e5),this.camera.position.z=-1e3;var t=1==window.devicePixelRatio;this.renderer=new THREE.WebGLRenderer({antialias:t}),this.renderer.setClearColor(0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.containerElement.appendChild(this.renderer.domElement),window.addEventListener("resize",function(t){e.handleResize(t)},!1)}return e.prototype.handleResize=function(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},e.prototype.startRendering=function(){this.update()},e.prototype.update=function(){requestAnimationFrame(this.update.bind(this)),this.onTick(),this.render()},e.prototype.render=function(){this.renderer.render(this.scene,this.camera)},e.prototype.onTick=function(){},e}();e.BasicView=t}(e||(e={}));var e,t=this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);i.prototype=t.prototype,e.prototype=new i};!function(e){var i=function(){function e(){WebFont.load({custom:{families:["Source Code Pro","FontAwesome"],urls:["https://fonts.googleapis.com/css?family=Source+Code+Pro:600","https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"],testStrings:{FontAwesome:"ÔÄÅ"}},active:function(){new a}})}return e}();e.DemoIconsPreload=i;var a=function(e){function i(){e.call(this),this.CANVAS_W=160,this.CANVAS_H=40,this.WORD_LIST=["html5","css3","javascript","node.js"],this._matrixLength=8,this._particleList=[],this._wordIndex=0,this._hue=.6,this.HELPER_ZERO=new THREE.Vector3(0,0,0),this.setup(),this.createLogo(),this.startRendering()}return t(i,e),i.prototype.setup=function(){this.camera.far=1e5,this.camera.near=1,this.camera.position.z=5e3,this.camera.lookAt(this.HELPER_ZERO);var e=new THREE.PlaneBufferGeometry(5e4,5e4,1,1),t=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("http://ics-web.jp/lab-data/150601_threejs_mosaic/imgs/bg.png")}),i=new THREE.Mesh(e,t);i.position.z=-1e4,this.scene.add(i),this._bg=i;var a=new THREE.DirectionalLight(16777215);a.position.set(0,1,1).normalize(),this.scene.add(a),this._wrap=new THREE.Object3D,this.scene.add(this._wrap);for(var n=new createjs.Container,o=0,r=this._matrixLength*this._matrixLength;o<r;o++){var s=String.fromCharCode(61730+o),h=new createjs.Text(s,"200px FontAwesome","#FFF");h.textBaseline="middle",h.textAlign="center",h.x=o%this._matrixLength*256+128,h.y=256*Math.floor(o/this._matrixLength)+128,n.addChild(h)}n.cache(0,0,256*this._matrixLength,256*this._matrixLength);var c=n.getCacheDataURL(),d=new Image;d.src=c;var l=new THREE.Texture(d);l.needsUpdate=!0;var m=1/this._matrixLength,p=1/this._matrixLength;this._particleList=[];for(var o=0;o<this.CANVAS_W;o++)for(var u=0;u<this.CANVAS_H;u++){var w=this._matrixLength*Math.random()>>0,_=this._matrixLength*Math.random()>>0,E=new THREE.PlaneGeometry(40,40,1,1);this.change_uvs(E,m,p,w,_);var g=new THREE.MeshLambertMaterial({color:16777215,map:l,transparent:!0,side:THREE.DoubleSide});g.blending=THREE.AdditiveBlending;var v=new THREE.Mesh(E,g);this._wrap.add(v),this._particleList.push(v)}this.createParticleCloud()},i.prototype.createParticleCloud=function(){for(var e=new THREE.Geometry,t=0;t<5e4;t++)e.vertices.push(new THREE.Vector3(1e4*(Math.random()-.5),1e4*(Math.random()-.5),1e4*(Math.random()-.5)));var i=THREE.ImageUtils.loadTexture("http://ics-web.jp/lab-data/150601_threejs_mosaic/imgs/fire_particle.png"),a=new THREE.PointCloudMaterial({size:30,color:4473924,blending:THREE.AdditiveBlending,transparent:!0,depthTest:!1,map:i}),n=new THREE.PointCloud(e,a);n.position=new THREE.Vector3(0,0,0),this.scene.add(n)},i.prototype.createLogo=function(){var e=this,t=document.createElement("canvas");t.setAttribute("width",this.CANVAS_W+"px"),t.setAttribute("height",this.CANVAS_H+"px");var i=new createjs.Stage(t),a=new createjs.Text(this.WORD_LIST[this._wordIndex],"30px Source Code Pro","#FFF");this._wordIndex++,this._wordIndex>=this.WORD_LIST.length&&(this._wordIndex=0),a.textAlign="center",a.x=this.CANVAS_W/2,i.addChild(a),i.update();for(var n=new TimelineMax({onComplete:function(){var t=new TimelineMax;t.to("#coverBlack",1,{css:{opacity:1}}),t.call(function(){e.createLogo()})}}),o=t.getContext("2d"),r=0;r<this._particleList.length;r++)this._particleList[r].visible=!1;for(var s=o.getImageData(0,0,this.CANVAS_W,this.CANVAS_H).data,h=[],c=0,r=0;r<this.CANVAS_W;r++){h[r]=[];for(var d=0;d<this.CANVAS_H;d++){var l=0==s[4*(r+d*this.CANVAS_W)+3];h[r][d]=l,1==l&&c++}}for(var m=0,p=this.CANVAS_W*this.CANVAS_H,r=0;r<this.CANVAS_W;r++)for(var d=0;d<this.CANVAS_H;d++)if(1!=h[r][d]){var u=this._particleList[m];u.material.color.setHSL(this._hue+.2*(r*t.height/p-.5),.5,.6+.4*Math.random()),u.material.blending=THREE.AdditiveBlending,this._wrap.add(u);var w={x:30*(r-t.width/2),y:30*(t.height/2-d),z:0},_={x:2e3*(Math.random()-.5)-500,y:1e3*(Math.random()-.5),z:1e4};u.position.x=_.x,u.position.y=_.y,u.position.z=_.z;var E={z:0},g={z:10*Math.PI*(Math.random()-.5)};u.rotation.z=g.z;var v=3*Cubic.easeInOut.getRatio(m/1600)+1.5*Math.random();n.to(u.rotation,6,{z:E.z,ease:Cubic.easeInOut},v),u.visible=!1,n.set(u,{visible:!0},v),n.to(u.position,7,{bezier:[_,{x:(0+w.x)/2+300,y:(_.y+w.y)/2+500*Math.random(),z:(_.z+w.z)/2},w],delay:v/1,ease:Expo.easeInOut},0),m++}this._wrap.position.z=-5e3,n.to(this._wrap.position,12,{z:6e3,ease:Quart.easeIn},0),Math.random()<.3?(n.set(this.camera.position,{x:200,y:-200,z:1e3},0),n.to(this.camera.position,14,{x:0,y:0,z:5e3,ease:Quart.easeInOut},0),n.set(this.camera,{fov:90},0),n.to(this.camera,14,{fov:45,ease:Quart.easeInOut},0)):Math.random()<.5?(n.set(this.camera.position,{x:100,y:1e3,z:1e3},0),n.to(this.camera.position,14,{x:0,y:0,z:5e3,ease:Quart.easeInOut},0)):(n.set(this.camera.position,{x:-3e3,y:3e3,z:0},0),n.to(this.camera.position,15,{x:0,y:0,z:5e3,ease:Quart.easeInOut},0)),n.to("#coverBlack",1,{css:{opacity:0}},0),Math.random()<.3?(n.timeScale(3),n.addCallback(function(){TweenMax.to(n,1,{timeScale:.05,ease:Cubic.easeInOut}),TweenMax.to(n,.5,{timeScale:3,delay:3.5,ease:Cubic.easeInOut}),TweenMax.to(n,.5,{timeScale:.05,delay:4,ease:Cubic.easeInOut}),TweenMax.to(n,2,{timeScale:5,delay:9,ease:Cubic.easeIn})},3.5)):Math.random()<.5?(n.timeScale(6),TweenMax.to(n,4,{timeScale:.005,ease:Cubic.easeOut}),TweenMax.to(n,4,{timeScale:2,ease:Cubic.easeIn,delay:5})):n.timeScale(1),this._bg.material.color.setHSL(this._hue,1,.5),this._hue+=.2,this._hue>=1&&(this._hue=0)},i.prototype.onTick=function(){e.prototype.onTick.call(this),this.camera.lookAt(this.HELPER_ZERO);var t=this.camera.position.clone();t.negate(),t.normalize(),t.multiplyScalar(1e4),this._bg.position.copy(t),this._bg.lookAt(this.camera.position)},i.prototype.change_uvs=function(e,t,i,a,n){for(var o=e.faceVertexUvs[0],r=0;r<o.length;r++)for(var s=o[r],h=0;h<s.length;h++){var c=s[h];c.x=(c.x+a)*t,c.y=(c.y+n)*i}},i}(e.BasicView)}(e||(e={})),window.addEventListener("load",function(){new e.DemoIconsPreload})}